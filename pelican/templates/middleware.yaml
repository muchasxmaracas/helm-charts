apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: pelican-https-headers
  namespace: pelican
spec:
  headers:
    # Tells Pelican "The user is on HTTPS"
    customRequestHeaders:
      X-Forwarded-Proto: "https"
    # Prevents Traefik from adding its own redirects
    sslRedirect: false